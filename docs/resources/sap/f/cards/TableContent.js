/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/f/library","sap/ui/base/ManagedObject","sap/m/Table","sap/f/cards/BaseListContent","sap/m/Column","sap/m/ColumnListItem","sap/m/Text","sap/m/Link","sap/m/ProgressIndicator","sap/m/ObjectIdentifier","sap/m/ObjectStatus","sap/f/Avatar","sap/ui/core/library","sap/m/library","sap/f/cards/BindingResolver","sap/f/cards/BindingHelper","sap/f/cards/IconFormatter"],function(t,e,i,r,n,a,s,o,l,p,c,u,f,d,h,g,m){"use strict";var v=t.AvatarSize;var y=f.VerticalAlign;var _=d.ListSeparators;var w=d.ListType;var b=t.cards.AreaType;var A=r.extend("sap.f.cards.TableContent",{renderer:{}});A.prototype.exit=function(){r.prototype.exit.apply(this,arguments);if(this._oItemTemplate){this._oItemTemplate.destroy();this._oItemTemplate=null}};A.prototype._getTable=function(){if(this._bIsBeingDestroyed){return null}var t=this.getAggregation("_content");if(!t){t=new i({id:this.getId()+"-Table",showSeparators:_.None});this.setAggregation("_content",t)}return t};A.prototype.setConfiguration=function(t){r.prototype.setConfiguration.apply(this,arguments);if(!t){return this}if(t.rows&&t.columns){this._setStaticColumns(t.rows,t.columns);return this}if(t.row&&t.row.columns){this._setColumns(t.row)}return this};A.prototype.onDataChanged=function(){this._checkHiddenNavigationItems(this.getConfiguration().row)};A.prototype._setColumns=function(t){var e=[],i=this._getTable(),r=t.columns;r.forEach(function(t){i.addColumn(new n({header:new s({text:t.title}),width:t.width,hAlign:t.hAlign}));e.push(this._createCell(t))}.bind(this));this._oItemTemplate=new a({cells:e,vAlign:y.Middle});this._oActions.setAreaType(b.ContentItem);this._oActions.attach(t,this);var o={template:this._oItemTemplate};this._filterHiddenNavigationItems(t,o);this._bindAggregation("items",i,o)};A.prototype._setStaticColumns=function(t,e){var i=this._getTable();e.forEach(function(t){i.addColumn(new n({header:new s({text:t.title}),width:t.width,hAlign:t.hAlign}))});t.forEach(function(t){var e=new a({vAlign:y.Middle});if(t.cells&&Array.isArray(t.cells)){for(var r=0;r<t.cells.length;r++){e.addCell(this._createCell(t.cells[r]))}}if(t.actions&&Array.isArray(t.actions)){var n=t.actions[0];if(n.type===w.Navigation){e.setType(w.Navigation)}if(n.url){e.attachPress(function(){window.open(n.url,n.target||"_blank")})}}i.addItem(e)}.bind(this));this.fireEvent("_actionContentReady")};A.prototype._createCell=function(t){if(t.url){return new o({text:t.value,href:t.url,target:t.target||"_blank"})}if(t.identifier){var e;if(t.identifier.url){e=g.formattedProperty(t.identifier.url,function(t){if(typeof t==="string"){return true}return false})}var i=new p({title:t.value,titleActive:e});if(t.identifier.url){i.attachTitlePress(function(e){var i=e.getSource(),r=i.getBindingContext(),n=i.getModel(),a,s,o;if(r){a=r.getPath()}s=h.resolveValue(t.identifier.url,n,a);o=h.resolveValue(t.identifier.target,n,a);if(s){window.open(s,o||"_blank")}})}return i}if(t.state){return new c({text:t.value,state:t.state})}if(t.value){return new s({text:t.value})}if(t.icon){var r=g.formattedProperty(t.icon.src,function(t){return m.formatSrc(t,this._sAppId)}.bind(this));return new u({src:r,displayShape:t.icon.shape,displaySize:v.XS})}if(t.progressIndicator){return new l({percentValue:t.progressIndicator.percent,displayValue:t.progressIndicator.text,state:t.progressIndicator.state})}};A.prototype.getInnerList=function(){return this._getTable()};return A});