/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./library","sap/ui/core/Control","sap/ui/base/ManagedObject","./IconTabBarRenderer","./IconTabHeader","sap/ui/core/util/ResponsivePaddingsEnablement","sap/ui/thirdparty/jquery"],function(e,t,n,o,r,a,i){"use strict";var s=e.IconTabHeaderMode;var p=e.BackgroundDesign;var d=e.IconTabDensityMode;var c=t.extend("sap.m.IconTabBar",{metadata:{interfaces:["sap.m.ObjectHeaderContainer","sap.f.IDynamicPageStickyContent"],library:"sap.m",properties:{showSelection:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},expandable:{type:"boolean",group:"Misc",defaultValue:true},expanded:{type:"boolean",group:"Misc",defaultValue:true},selectedKey:{type:"string",group:"Data",defaultValue:null},upperCase:{type:"boolean",group:"Appearance",defaultValue:false},stretchContentHeight:{type:"boolean",group:"Appearance",defaultValue:false},applyContentPadding:{type:"boolean",group:"Appearance",defaultValue:true},backgroundDesign:{type:"sap.m.BackgroundDesign",group:"Appearance",defaultValue:p.Solid},headerMode:{type:"sap.m.IconTabHeaderMode",group:"Appearance",defaultValue:s.Standard},showOverflowSelectList:{type:"boolean",group:"Appearance",defaultValue:false},headerBackgroundDesign:{type:"sap.m.BackgroundDesign",group:"Appearance",defaultValue:p.Solid},enableTabReordering:{type:"boolean",group:"Behavior",defaultValue:false},tabDensityMode:{type:"sap.m.IconTabDensityMode",group:"Appearance",defaultValue:d.Cozy}},aggregations:{items:{type:"sap.m.IconTab",multiple:true,singularName:"item",forwarding:{getter:"_getIconTabHeader",aggregation:"items",forwardBinding:true}},content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},_header:{type:"sap.m.IconTabHeader",multiple:false,visibility:"hidden"}},events:{select:{parameters:{item:{type:"sap.m.IconTabFilter"},key:{type:"string"},selectedItem:{type:"sap.m.IconTabFilter"},selectedKey:{type:"string"}}},expand:{parameters:{expand:{type:"boolean"},collapse:{type:"boolean"}}}},designtime:"sap/m/designtime/IconTabBar.designtime"}});a.call(c.prototype,{header:{selector:".sapMITHWrapper"},content:{suffix:"content"}});c.prototype.init=function(){this._initResponsivePaddingsEnablement()};c.prototype.setExpanded=function(e){this.setProperty("expanded",e,true);if(this.$().length){this._toggleExpandCollapse(e)}return this};c.prototype.setExpandable=function(e){this.setProperty("expandable",e,true);return this};c.prototype.setHeaderMode=function(e){this.setProperty("headerMode",e,true);this._getIconTabHeader().setMode(e);return this};c.prototype.setTabDensityMode=function(e){this.setProperty("tabDensityMode",e);this._getIconTabHeader().setTabDensityMode(e);return this};c.prototype.setHeaderBackgroundDesign=function(e){this.setProperty("headerBackgroundDesign",e,true);this._getIconTabHeader().setBackgroundDesign(e);return this};c.prototype.setShowOverflowSelectList=function(e){this.setProperty("showOverflowSelectList",e,true);this._getIconTabHeader().setShowOverflowSelectList(e);return this};c.prototype.setEnableTabReordering=function(e){this.setProperty("enableTabReordering",e,true);this._getIconTabHeader().setEnableTabReordering(e);return this};c.prototype._rerenderContent=function(e){var t=this.$("content");if(e&&t.length>0){var n=sap.ui.getCore().createRenderManager();for(var o=0;o<e.length;o++){n.renderControl(e[o])}n.flush(t[0]);n.destroy()}};c.prototype._toggleExpandCollapse=function(e){var t=this.$("content");var n=this._getIconTabHeader().oSelectedItem;if(e===undefined){e=!this.getExpanded()}if(n){n.$().toggleClass("sapMITBSelected",e);n.$().attr({"aria-expanded":e});if(e){n.$().attr({"aria-selected":e})}else{n.$().removeAttr("aria-selected")}}this._iAnimationCounter=this._iAnimationCounter===undefined?1:++this._iAnimationCounter;if(e){if(n){if(this.$("content").children().length===0){var o=n.getContent();if(o.length>0){this._rerenderContent(o)}else{this._rerenderContent(this.getContent())}}t.stop(true,true).slideDown("400",i.proxy(this.onTransitionEnded,this,e));this.$("containerContent").toggleClass("sapMITBContentClosed",!e)}}else{this.$("contentArrow").hide();t.stop(true,true).slideUp("400",i.proxy(this.onTransitionEnded,this,e))}if(!e||n){this.setProperty("expanded",e,true)}this.fireExpand({expand:e,collapse:!e});return this};c.prototype.onTransitionEnded=function(e){var t=this.$("content"),n=this.$("containerContent"),o=this.$("contentArrow");if(this._iAnimationCounter===1){n.toggleClass("sapMITBContentClosed",!e);if(e){o.show();t.css("display","block")}else{o.hide();t.css("display","none")}}this._iAnimationCounter=this._iAnimationCounter>0?--this._iAnimationCounter:0;return this};c.prototype._getIconTabHeader=function(){var e=this.getAggregation("_header");if(!e){e=new r(this.getId()+"--header",{});this.setAggregation("_header",e,true)}return e};c.prototype._getStickyContent=function(){var e=this._getIconTabHeader();c._CLASSES_TO_COPY.forEach(function(t){if(this.hasStyleClass(t)){e.addStyleClass(t)}}.bind(this));return e};c.prototype._returnStickyContent=function(){if(this.bIsDestroyed){return}this._getStickyContent().$().prependTo(this.$())};c.prototype._setStickySubheaderSticked=function(e){this._bStickyContentSticked=e};c.prototype._getStickySubheaderSticked=function(){return this._bStickyContentSticked};c.prototype.onBeforeRendering=function(){var e=this._getIconTabHeader().$();if(this._bStickyContentSticked&&e){delete this._bStickyContentSticked;this._getIconTabHeader().$().remove()}};c.prototype.setShowSelection=function(e){this._getIconTabHeader().setShowSelection(e);return this};c.prototype.getShowSelection=function(){return this._getIconTabHeader().getShowSelection()};c.prototype.setSelectedKey=function(e){this._getIconTabHeader().setSelectedKey(e);return this};c.prototype.getSelectedKey=function(){return this._getIconTabHeader().getSelectedKey()};c.prototype.setSelectedItem=function(e,t){return this._getIconTabHeader().setSelectedItem(e,t)};c._CLASSES_TO_COPY=["sapUiResponsiveContentPadding","sapUiNoContentPadding","sapUiContentPadding"];return c});